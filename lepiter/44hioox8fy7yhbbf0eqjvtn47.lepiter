{
	"__schema" : "4.1",
	"__type" : "page",
	"children" : {
		"__type" : "snippets",
		"items" : [
			{
				"__type" : "textSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-14T09:14:18.746455+02:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-14T09:15:17.726866+02:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "bITnpeTzDQCcEozCAIGrRQ=="
				},
				"paragraphStyle" : {
					"__type" : "textStyle"
				},
				"string" : "LanguageLink uses a custom protocol for communication between Glamorous Toolkit and the language server. In this page we give an overview of the protocol format."
			},
			{
				"__type" : "textSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-13T13:10:13.840154+02:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-14T09:17:01.764034+02:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "LcHF09PzDQCQ9e/tAIGrRQ=="
				},
				"paragraphStyle" : {
					"__type" : "textStyle"
				},
				"string" : "The LanguageLink protocol uses either JSON or [MsgPack](https://msgpack.org/), a binary serialization format similar to JSON. The relevant classes implementing the encodings are subclasses of {{gtClass:PharoLinkAbstractMessageBroker}}."
			},
			{
				"__type" : "textSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-14T09:17:24.197818+02:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-14T09:18:10.580665+02:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "cpqir+TzDQCiDWdWAIGrRQ=="
				},
				"paragraphStyle" : {
					"__type" : "textStyle"
				},
				"string" : "The encoded messages contain dictionaries describing commands and responses between Glamorous Toolkit and the language server. They are encoded as follows:"
			},
			{
				"__type" : "pharoSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-14T09:18:13.071987+02:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-19T11:08:29.957989+02:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "qQ3fs+TzDQCmqUyYAIGrRQ=="
				},
				"code" : "{\r\t'type' -> msgType. \"explained later\"\r\t'__sync' -> isSync. \"depends on the type of the message\"\r\t\"... various other keys dependent on the message type\"\r} asDictionary"
			},
			{
				"__type" : "textSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-14T09:23:39.33955+02:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-14T09:24:11.752001+02:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "235Rx+TzDQCqBZiDAIGrRQ=="
				},
				"paragraphStyle" : {
					"__type" : "textStyle"
				},
				"string" : "To understand the protocol better, we will have to discuss message types. The following types exist:"
			},
			{
				"__type" : "textSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-14T09:24:13.765356+02:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-19T12:19:26.272222+02:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "GM1eyeTzDQCs+FvwAIGrRQ=="
				},
				"paragraphStyle" : {
					"__type" : "textStyle"
				},
				"string" : "- `ENQUEUE`: Enqueues a command, usually an evaluation, on the language server. Asynchronous.\n- `IS_ALIVE`: sends a heartbeat. Synchronous, sent periodically. The answer is expected to be the string `IS_ALIVE`."
			},
			{
				"__type" : "textSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-14T09:26:26.954907+02:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-14T09:27:11.67344+02:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "9htP0eTzDQCwVlTkAIGrRQ=="
				},
				"paragraphStyle" : {
					"__type" : "textStyle"
				},
				"string" : "Server implementations can implement custom message types, but none are implemented by any of the standard language implementations."
			},
			{
				"__type" : "textSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-14T09:27:11.969217+02:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-14T09:27:27.026922+02:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "+vj90+TzDQCzrZ+WAIGrRQ=="
				},
				"paragraphStyle" : {
					"__type" : "textStyle"
				},
				"string" : "### The `ENQUEUE` command"
			},
			{
				"__type" : "textSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-14T09:27:27.367467+02:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-14T09:29:11.644722+02:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "Eu7o1OTzDQC0a6EsAIGrRQ=="
				},
				"paragraphStyle" : {
					"__type" : "textStyle"
				},
				"string" : "The `ENQUEUE` command (implemented in {{gtClass:LanguageLinkEnqueueCommandMessage}}) is the central command for communication. It is sent for every code evaluation inside GT, whether triggered programatically or through a snippet."
			},
			{
				"__type" : "textSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-14T09:29:58.844898+02:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-14T09:30:25.18915+02:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "+3Uj2+TzDQC6pma2AIGrRQ=="
				},
				"paragraphStyle" : {
					"__type" : "textStyle"
				},
				"string" : "`ENQUEUE` commands contain other keys in the message describing the evaluation request. The shape is as follows:"
			},
			{
				"__type" : "pharoSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-14T09:30:28.988849+02:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-19T11:08:34.118235+02:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "pja83+TzDQC9TSSMAIGrRQ=="
				},
				"code" : "{\r\t'type' -> 'ENQUEUE'.\r\t'__sync' -> false.\r\t'commandId' -> 1234. \"a unique identifier for the command\"\r\t'statements' -> '1 + x'. \"the code to run, language-specific\"\r\t'bindings' -> {\r\t\t'x' -> 15\r\t} asDictionary \"custom bindings to inject into the language\"\r} asDictionary"
			},
			{
				"__type" : "textSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-19T11:47:02.334543+02:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-19T11:54:12.936507+02:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "QqlNXUv0DQCFZwdZAIGrRQ=="
				},
				"paragraphStyle" : {
					"__type" : "textStyle"
				},
				"string" : "Bindings should usually be kept by the server, but can be injected from the GT side. This is useful for, e.g., keeping cross-language bindings, as is possible in the [[Python snippet]]."
			},
			{
				"__type" : "textSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-19T11:54:26.509875+02:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-19T11:55:50.816643+02:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "jzvHd0v0DQCxHBRlCTzRpw=="
				},
				"paragraphStyle" : {
					"__type" : "textStyle"
				},
				"string" : "Contrary to what one would probably expect from an endpoint like this, but true to its command name, this is not expected to return the answer directly, but rather enqueue that command for asynchronous evaluation. This setup is used to avoid any long blocking calls between the server and Glamorous Toolkit."
			},
			{
				"__type" : "textSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-14T09:38:12.263715+02:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-19T11:56:08.556731+02:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "lEJZ++TzDQCCm2lVAIGrRQ=="
				},
				"paragraphStyle" : {
					"__type" : "textStyle"
				},
				"string" : "#### Answering an `ENQUEUE` command"
			},
			{
				"__type" : "textSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-19T11:56:08.765832+02:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-19T12:21:05.723764+02:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "1YrffUv0DQC5c2bMCTzRpw=="
				},
				"paragraphStyle" : {
					"__type" : "textStyle"
				},
				"string" : "A server is expected to execute an enqueued command asynchronously, at some point returning the evaluation result by sending a message to an endpoint called `EVAL` owned by the GT instance."
			},
			{
				"__type" : "textSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-19T12:21:05.987685+02:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-19T12:22:07.719516+02:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "OlUd10v0DQC/bZ02CTzRpw=="
				},
				"paragraphStyle" : {
					"__type" : "textStyle"
				},
				"string" : "Taking the example `ENQUEUE` statement above, we could respond to it like so if we were using the JSON encoder:"
			},
			{
				"__type" : "pharoSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-19T12:21:29.306235+02:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-19T12:24:26.664112+02:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "lyGB2Ev0DQCBETVQCTzRpw=="
				},
				"code" : "client := ZnClient new forJsonREST.\r\rclient url: 'http://localhost:', port , '/EVAL'.\r\rclient entity: {\r\t'type' -> 'EVAL'.\r\t'id' -> 1234. \"the ID must match the command ID sent above\"\r\t'value' -> '16'. \"this is sent directly to the encoder used by the language; more details below\"\r\t'__sync' -> false\r} asDictionary"
			},
			{
				"__type" : "textSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-19T12:32:38.153317+02:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-06-19T12:36:20.692896+02:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "Eu1eAEz0DQCJKCv0CTzRpw=="
				},
				"paragraphStyle" : {
					"__type" : "textStyle"
				},
				"string" : "The port here may be injected in various ways, depending on how the server is set up, but it should match wahtever is set in the {{gtClass:LanguageLinkSettings}} class used by the application (for some references refer to {{gtMethod:LanguageLinkSettings class>>#jsDefaultSettings}}, {{gtMethod:LanguageLinkSettings class>>#pharoDefaultSettings}}, or {{gtMethod:PBPlatform>>#defaultSettings}})."
			}
		]
	},
	"createEmail" : {
		"__type" : "email",
		"emailString" : "<unknown>"
	},
	"createTime" : {
		"__type" : "time",
		"time" : {
			"__type" : "dateAndTime",
			"dateAndTimeString" : "2025-06-13T13:10:13.784103+02:00"
		}
	},
	"editEmail" : {
		"__type" : "email",
		"emailString" : "<unknown>"
	},
	"editTime" : {
		"__type" : "time",
		"time" : {
			"__type" : "dateAndTime",
			"dateAndTimeString" : "2025-06-13T13:10:13.784103+02:00"
		}
	},
	"pageType" : {
		"__type" : "namedPage",
		"title" : "The LanguageLink protocol"
	},
	"uid" : {
		"__type" : "uuid",
		"uuid" : "47e5c4d3-d3f3-0d00-90f4-b1fb0081ab45"
	}
}