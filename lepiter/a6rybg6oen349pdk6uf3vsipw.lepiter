{
	"__schema" : "4.1",
	"__type" : "page",
	"children" : {
		"__type" : "snippets",
		"items" : [
			{
				"__type" : "textSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2024-01-31T14:49:48.202913+01:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2024-01-31T14:50:54.397557+01:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "ws+i45/MDQCZvu/cCm8XrA=="
				},
				"paragraphStyle" : {
					"__type" : "textStyle"
				},
				"string" : "Embeddings can be saved in a registry to avoid recreating them. The registry also allows us to search for a given number of related embeddings."
			},
			{
				"__type" : "textSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2024-06-23T13:39:07.788836+02:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2024-06-23T13:39:07.795523+02:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "YIrI6J/MDQCdq+VECm8XrA=="
				},
				"paragraphStyle" : {
					"__type" : "textStyle"
				},
				"string" : "First we get a client (see [[Working with the OpenAI API client]]):"
			},
			{
				"__type" : "pharoSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2024-01-31T14:51:05.475169+01:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2024-07-29T13:20:50.432125+02:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "gtM96J/MDQCddD9eCm8XrA=="
				},
				"code" : "client := GtOpenAIClient withApiKeyFromFile"
			},
			{
				"__type" : "textSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2024-01-31T14:51:10.394158+01:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2024-01-31T14:51:54.132205+01:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "+e6I6J/MDQCdfh2HCm8XrA=="
				},
				"paragraphStyle" : {
					"__type" : "textStyle"
				},
				"string" : "We can now try to query the registry."
			},
			{
				"__type" : "pharoSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2024-01-31T14:51:59.764981+01:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2024-01-31T14:54:05.293314+01:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "L0J665/MDQChJXJECm8XrA=="
				},
				"code" : "input := 'A text for an embedding.'.\r\rembedding := GtLlmEmbeddingRegistry uniqueInstance at: input"
			},
			{
				"__type" : "textSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2024-01-31T14:52:35.080256+01:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2024-01-31T14:53:12.855491+01:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "cSKV7Z/MDQCiBxjoCm8XrA=="
				},
				"paragraphStyle" : {
					"__type" : "textStyle"
				},
				"string" : "This code will raise an error if the embedding is not found. We can use the client to instead create it if it isnâ€™t found."
			},
			{
				"__type" : "pharoSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2024-01-31T14:52:31.213488+01:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2024-07-29T13:21:06.562378+02:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "eiRa7Z/MDQCiAuMXCm8XrA=="
				},
				"code" : "embedding := GtLlmEmbeddingRegistry\r\tuniqueInstance\r\t\tat: input\r\t\tifAbsentCreateEmbedding: [ (client generateEmbeddingsWithModel: 'text-embedding-ada-002' andInput: input)\r\t\t\t\titems first embedding ]"
			},
			{
				"__type" : "textSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2024-01-31T14:54:13.528116+01:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2024-07-29T13:24:37.495569+02:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "81Rz85/MDQCllSJ7Cm8XrA=="
				},
				"paragraphStyle" : {
					"__type" : "textStyle"
				},
				"string" : "We can then query the registry for the most related embeddings we can find in the registry. The input itself will not appear in this list."
			},
			{
				"__type" : "pharoSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2024-01-31T14:54:45.24646+01:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2024-01-31T14:54:52.390443+01:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "REhX9Z/MDQCn7cPKCm8XrA=="
				},
				"code" : "GtLlmEmbeddingRegistry uniqueInstance findNearest: 3 for: embedding"
			},
			{
				"__type" : "textSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2024-01-31T15:06:28.328108+01:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2024-01-31T15:06:39.620397+01:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "Y3w/H6DMDQCoqJKYCm8XrA=="
				},
				"paragraphStyle" : {
					"__type" : "textStyle"
				},
				"string" : "If we want to reset the registry we can do so."
			},
			{
				"__type" : "pharoSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2024-01-31T15:06:43.548444+01:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2024-01-31T15:06:53.399262+01:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "ebAnIKDMDQCpuzo7Cm8XrA=="
				},
				"code" : "GtLlmEmbeddingRegistry uniqueInstance reset"
			}
		]
	},
	"createEmail" : {
		"__type" : "email",
		"emailString" : "<unknown>"
	},
	"createTime" : {
		"__type" : "time",
		"time" : {
			"__type" : "dateAndTime",
			"dateAndTimeString" : "2024-01-31T14:49:48.160415+01:00"
		}
	},
	"editEmail" : {
		"__type" : "email",
		"emailString" : "<unknown>"
	},
	"editTime" : {
		"__type" : "time",
		"time" : {
			"__type" : "dateAndTime",
			"dateAndTimeString" : "2024-01-31T14:49:48.160415+01:00"
		}
	},
	"pageType" : {
		"__type" : "namedPage",
		"title" : "Using the embedding registry"
	},
	"uid" : {
		"__type" : "uuid",
		"uuid" : "c428a2e3-9fcc-0d00-99bd-aa360a6f17ac"
	}
}