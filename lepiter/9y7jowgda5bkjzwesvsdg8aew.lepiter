{
	"__schema" : "4.1",
	"__type" : "page",
	"children" : {
		"__type" : "snippets",
		"items" : [
			{
				"__type" : "textSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2022-02-15T11:11:01.21596+01:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2025-07-08T15:52:10.183619+02:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "sR+6e22UDQChPcngD3Q2zw=="
				},
				"paragraphStyle" : {
					"__type" : "textStyle"
				},
				"string" : " [Yarn](https://en.wikipedia.org/wiki/Yarn_%28package_manager%29) is a package manager for Node.js JavaScript."
			},
			{
				"__type" : "textSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "chisvasileandrei@gmail.com"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2021-03-01T17:23:49.027556+01:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2022-02-15T11:09:02.035832+01:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "gAwmImkcAAAAAAAAAAAAAA=="
				},
				"paragraphStyle" : {
					"__type" : "textStyle"
				},
				"string" : "This page describes how to parse and visualize `yarn.lock` files. A yarn file can be dowloaded from a url or loaded from disk."
			},
			{
				"__type" : "textSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [ ]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "chisvasileandrei@gmail.com"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2021-03-01T17:24:03.318358+01:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "veit.heller@feenk.com"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2022-12-12T20:38:37.423079+01:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "wE5jpqe+AAAAAAAAAAAAAA=="
				},
				"paragraphStyle" : {
					"__type" : "textStyle"
				},
				"string" : "*Note: In case the JavaScript snippet is not working view, please check [[JavaScript snippet]].*"
			},
			{
				"__type" : "textSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [
						{
							"__type" : "textSnippet",
							"children" : {
								"__type" : "snippets",
								"items" : [ ]
							},
							"createEmail" : {
								"__type" : "email",
								"emailString" : "<unknown>"
							},
							"createTime" : {
								"__type" : "time",
								"time" : {
									"__type" : "dateAndTime",
									"dateAndTimeString" : "2021-06-12T23:27:33.540029+02:00"
								}
							},
							"editEmail" : {
								"__type" : "email",
								"emailString" : "veit.heller@feenk.com"
							},
							"editTime" : {
								"__type" : "time",
								"time" : {
									"__type" : "dateAndTime",
									"dateAndTimeString" : "2022-12-12T20:38:24.36504+01:00"
								}
							},
							"uid" : {
								"__type" : "uid",
								"uidString" : "eTv8WTuzAAAAAAAAAAAAAA=="
							},
							"paragraphStyle" : {
								"__type" : "textStyle"
							},
							"string" : "We get the file from a GitHub project. We do this through a [[Pharo snippet]]:"
						},
						{
							"__type" : "pharoSnippet",
							"children" : {
								"__type" : "snippets",
								"items" : [ ]
							},
							"createEmail" : {
								"__type" : "email",
								"emailString" : "chisvasileandrei@gmail.com"
							},
							"createTime" : {
								"__type" : "time",
								"time" : {
									"__type" : "dateAndTime",
									"dateAndTimeString" : "2021-03-01T17:27:27.776254+01:00"
								}
							},
							"editEmail" : {
								"__type" : "email",
								"emailString" : "<unknown>"
							},
							"editTime" : {
								"__type" : "time",
								"time" : {
									"__type" : "dateAndTime",
									"dateAndTimeString" : "2021-06-12T23:27:23.91933+02:00"
								}
							},
							"uid" : {
								"__type" : "uid",
								"uidString" : "mEZpjAo2AAAAAAAAAAAAAA=="
							},
							"code" : "yarnLockUrl := 'https://raw.githubusercontent.com/d3/d3/master/yarn.lock'.\rresponse := ZnEasy get: yarnLockUrl.\rresponse isSuccess \r\tifFalse: [ Error signal: 'Could not download file' ].\rlockFileContent := response contents"
						}
					]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "chisvasileandrei@gmail.com"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2021-03-01T17:27:19.785112+01:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2021-06-12T23:40:14.84575+02:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "com5pU0lAAAAAAAAAAAAAA=="
				},
				"paragraphStyle" : {
					"__type" : "textStyle"
				},
				"string" : "Let's get ourselves a `yarn.lock`:"
			},
			{
				"__type" : "textSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [
						{
							"__type" : "textSnippet",
							"children" : {
								"__type" : "snippets",
								"items" : [
									{
										"__type" : "pharoSnippet",
										"children" : {
											"__type" : "snippets",
											"items" : [ ]
										},
										"createEmail" : {
											"__type" : "email",
											"emailString" : "chisvasileandrei@gmail.com"
										},
										"createTime" : {
											"__type" : "time",
											"time" : {
												"__type" : "dateAndTime",
												"dateAndTimeString" : "2021-03-01T17:24:49.769198+01:00"
											}
										},
										"editEmail" : {
											"__type" : "email",
											"emailString" : "<unknown>"
										},
										"editTime" : {
											"__type" : "time",
											"time" : {
												"__type" : "dateAndTime",
												"dateAndTimeString" : "2021-06-07T07:59:16.092645+02:00"
											}
										},
										"uid" : {
											"__type" : "uid",
											"uidString" : "PC6z1xwOAAAAAAAAAAAAAA=="
										},
										"code" : "JSLinkApplication start.\rJSLinkApplication uniqueInstance installModule: '@yarnpkg/lockfile'"
									}
								]
							},
							"createEmail" : {
								"__type" : "email",
								"emailString" : "<unknown>"
							},
							"createTime" : {
								"__type" : "time",
								"time" : {
									"__type" : "dateAndTime",
									"dateAndTimeString" : "2021-06-12T23:41:19.236179+02:00"
								}
							},
							"editEmail" : {
								"__type" : "email",
								"emailString" : "<unknown>"
							},
							"editTime" : {
								"__type" : "time",
								"time" : {
									"__type" : "dateAndTime",
									"dateAndTimeString" : "2021-06-12T23:41:46.428967+02:00"
								}
							},
							"uid" : {
								"__type" : "uid",
								"uidString" : "ChRhOPqADQCWaSjwBkJc+w=="
							},
							"paragraphStyle" : {
								"__type" : "textStyle"
							},
							"string" : "Before we run the JavaScript code,  we first need to load the module into the remote server:"
						},
						{
							"__type" : "textSnippet",
							"children" : {
								"__type" : "snippets",
								"items" : [
									{
										"__type" : "javascriptSnippet",
										"children" : {
											"__type" : "snippets",
											"items" : [ ]
										},
										"createEmail" : {
											"__type" : "email",
											"emailString" : "chisvasileandrei@gmail.com"
										},
										"createTime" : {
											"__type" : "time",
											"time" : {
												"__type" : "dateAndTime",
												"dateAndTimeString" : "2021-03-01T17:29:36.928783+01:00"
											}
										},
										"editEmail" : {
											"__type" : "email",
											"emailString" : "chisvasileandrei@gmail.com"
										},
										"editTime" : {
											"__type" : "time",
											"time" : {
												"__type" : "dateAndTime",
												"dateAndTimeString" : "2021-03-01T17:48:12.466964+01:00"
											}
										},
										"uid" : {
											"__type" : "uid",
											"uidString" : "n0lxN7TXAAAAAAAAAAAAAA=="
										},
										"code" : "var lockFile = require('@yarnpkg/lockfile');\rvar parsedLockFileJson = lockFile.parse(lockFileContent);\rvar lockFileJsonString = JSON.stringify(parsedLockFileJson);\rlockFileJsonString;"
									}
								]
							},
							"createEmail" : {
								"__type" : "email",
								"emailString" : "<unknown>"
							},
							"createTime" : {
								"__type" : "time",
								"time" : {
									"__type" : "dateAndTime",
									"dateAndTimeString" : "2021-06-12T23:41:54.60415+02:00"
								}
							},
							"editEmail" : {
								"__type" : "email",
								"emailString" : "<unknown>"
							},
							"editTime" : {
								"__type" : "time",
								"time" : {
									"__type" : "dateAndTime",
									"dateAndTimeString" : "2021-06-12T23:42:08.650405+02:00"
								}
							},
							"uid" : {
								"__type" : "uid",
								"uidString" : "5GOgOvqADQCWarr9BkJc+w=="
							},
							"paragraphStyle" : {
								"__type" : "textStyle"
							},
							"string" : "Now, we can run the code to parse the contents:"
						}
					]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "chisvasileandrei@gmail.com"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2021-03-01T17:29:19.766997+01:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "veit.heller@feenk.com"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2022-12-12T20:38:37.424839+01:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "fRwNDlyaAAAAAAAAAAAAAA=="
				},
				"paragraphStyle" : {
					"__type" : "textStyle"
				},
				"string" : "Now that we have the contents of the file, we need to parse it. So, we use a [[JavaScript snippet]] to do just that and transform it to JSON."
			},
			{
				"__type" : "textSnippet",
				"children" : {
					"__type" : "snippets",
					"items" : [
						{
							"__type" : "textSnippet",
							"children" : {
								"__type" : "snippets",
								"items" : [
									{
										"__type" : "pharoSnippet",
										"children" : {
											"__type" : "snippets",
											"items" : [ ]
										},
										"createEmail" : {
											"__type" : "email",
											"emailString" : "chisvasileandrei@gmail.com"
										},
										"createTime" : {
											"__type" : "time",
											"time" : {
												"__type" : "dateAndTime",
												"dateAndTimeString" : "2021-03-01T17:30:22.011673+01:00"
											}
										},
										"editEmail" : {
											"__type" : "email",
											"emailString" : "chisvasileandrei@gmail.com"
										},
										"editTime" : {
											"__type" : "time",
											"time" : {
												"__type" : "dateAndTime",
												"dateAndTimeString" : "2021-03-01T17:30:22.976969+01:00"
											}
										},
										"uid" : {
											"__type" : "uid",
											"uidString" : "0YtIGl82AAAAAAAAAAAAAA=="
										},
										"code" : "lockFileJson := STONJSON fromString: lockFileJsonString.\rlockFileData := lockFileJson at: 'object'."
									}
								]
							},
							"createEmail" : {
								"__type" : "email",
								"emailString" : "chisvasileandrei@gmail.com"
							},
							"createTime" : {
								"__type" : "time",
								"time" : {
									"__type" : "dateAndTime",
									"dateAndTimeString" : "2021-03-01T17:30:10.525305+01:00"
								}
							},
							"editEmail" : {
								"__type" : "email",
								"emailString" : "chisvasileandrei@gmail.com"
							},
							"editTime" : {
								"__type" : "time",
								"time" : {
									"__type" : "dateAndTime",
									"dateAndTimeString" : "2021-03-01T17:30:15.304508+01:00"
								}
							},
							"uid" : {
								"__type" : "uid",
								"uidString" : "MIlxmrqmAAAAAAAAAAAAAA=="
							},
							"paragraphStyle" : {
								"__type" : "textStyle"
							},
							"string" : "Extract the projects defined inside the yarn lock file."
						},
						{
							"__type" : "textSnippet",
							"children" : {
								"__type" : "snippets",
								"items" : [
									{
										"__type" : "pharoSnippet",
										"children" : {
											"__type" : "snippets",
											"items" : [ ]
										},
										"createEmail" : {
											"__type" : "email",
											"emailString" : "chisvasileandrei@gmail.com"
										},
										"createTime" : {
											"__type" : "time",
											"time" : {
												"__type" : "dateAndTime",
												"dateAndTimeString" : "2021-03-01T17:31:00.023575+01:00"
											}
										},
										"editEmail" : {
											"__type" : "email",
											"emailString" : "<unknown>"
										},
										"editTime" : {
											"__type" : "time",
											"time" : {
												"__type" : "dateAndTime",
												"dateAndTimeString" : "2021-07-11T11:52:44.323757+02:00"
											}
										},
										"uid" : {
											"__type" : "uid",
											"uidString" : "G/YHZIKxAAAAAAAAAAAAAA=="
										},
										"code" : "projectIds := OrderedCollection new.\redges := OrderedCollection new.\r\rlockFileData associations collect: [ :assoc | \r\t| projectName versionName projectId |\r\tprojectName := assoc key \r\t\tcopyFrom: 1 to: (assoc key indexOf: $@ startingAt: 2) - 1.\r\tversionName := assoc value at: 'version'.\r\tprojectId := projectName,'@', versionName.\r\t(projectIds includes: projectId) ifFalse: [\r\t\tprojectIds add: projectId ].\r\t\r\t(assoc value includesKey: 'dependencies') ifTrue: [ \r\t\t(assoc value at: 'dependencies') \r\t\t\tkeysAndValuesDo: [ :dependencyName :dependencyValue |\r\t\t\t\t| targetNodeId edge |\r\t\t\t\t\r\t\t\t\ttargetNodeId := lockFileData \r\t\t\t\t\tat: dependencyName, '@', dependencyValue\r\t\t\t\t\tifPresent: [ :aTargetNode |\r\t\t\t\t\t\tdependencyName, '@', (aTargetNode at: #version) ]\r\t\t\t\t\tifAbsent: [\r\t\t\t\t\t\tdependencyName, '@', dependencyValue ].\r\t\t\t\t\t\r\t\t\t\tedge := projectId -> targetNodeId.\r\t\t\t\t(edges includes: edge) ifFalse: [\r\t\t\t\t\tedges add: edge ] ] ] ].\rmainProjectName := 'd3'.\rrootProjectIds := projectIds copy.\redges do: [ :anEdge |\r\trootProjectIds remove: anEdge value ifAbsent: [] ].\r\rrootProjectIds do: [ :aRootProjectId | \r\tedges add: mainProjectName -> aRootProjectId ].\r\rprojectIds add: mainProjectName.\r\t\r{projectIds. edges} "
									}
								]
							},
							"createEmail" : {
								"__type" : "email",
								"emailString" : "chisvasileandrei@gmail.com"
							},
							"createTime" : {
								"__type" : "time",
								"time" : {
									"__type" : "dateAndTime",
									"dateAndTimeString" : "2021-03-01T17:30:34.450978+01:00"
								}
							},
							"editEmail" : {
								"__type" : "email",
								"emailString" : "<unknown>"
							},
							"editTime" : {
								"__type" : "time",
								"time" : {
									"__type" : "dateAndTime",
									"dateAndTimeString" : "2021-07-11T11:53:11.661873+02:00"
								}
							},
							"uid" : {
								"__type" : "uid",
								"uidString" : "Oy3qsaY0AAAAAAAAAAAAAA=="
							},
							"paragraphStyle" : {
								"__type" : "textStyle"
							},
							"string" : "Create a list of nodes and connect them with edges."
						},
						{
							"__type" : "textSnippet",
							"children" : {
								"__type" : "snippets",
								"items" : [
									{
										"__type" : "pharoSnippet",
										"children" : {
											"__type" : "snippets",
											"items" : [ ]
										},
										"createEmail" : {
											"__type" : "email",
											"emailString" : "chisvasileandrei@gmail.com"
										},
										"createTime" : {
											"__type" : "time",
											"time" : {
												"__type" : "dateAndTime",
												"dateAndTimeString" : "2021-03-01T17:31:49.736985+01:00"
											}
										},
										"editEmail" : {
											"__type" : "email",
											"emailString" : "<unknown>"
										},
										"editTime" : {
											"__type" : "time",
											"time" : {
												"__type" : "dateAndTime",
												"dateAndTimeString" : "2021-06-12T23:30:50.144092+02:00"
											}
										},
										"uid" : {
											"__type" : "uid",
											"uidString" : "E56GbKAqAAAAAAAAAAAAAA=="
										},
										"code" : "view := GtMondrian new.\rview nodes \r\tstencil: [ :projectId |\r\t\tBrLabel  new\r\t\t\taptitude: BrGlamorousLabelAptitude;\r\t\t\ttext: projectId ];\r\twith: projectIds.\r\t\rview edges \r\tshape: [ :each |\r\t\tBlParabollaArcElement new \r\t\t\tzIndex: 0;\r\t\t\tcurvatureFraction: 0.2;\r\t\t\tborder: (BlBorder paint: (Color gray alpha: 0.2) width: 2);\r\t\t\ttoHead: (BlArrowheadSimpleArrow new\r\t\t\t\tborder: (BlBorder builder \r\t\t\t\t\tpaint: (Color gray alpha: 0.2); width: 2; build))  ];\r\tfromRightCenter;\r\ttoLeftCenter;\r\tconnect: edges from: #key to: #value.\r\t\rview layout custom: (GtGradHorizontalDominanceCenteredTreeLayout new \r\tlevelDistance: 100; \r\tnodeDistance: 10).\rview"
									}
								]
							},
							"createEmail" : {
								"__type" : "email",
								"emailString" : "chisvasileandrei@gmail.com"
							},
							"createTime" : {
								"__type" : "time",
								"time" : {
									"__type" : "dateAndTime",
									"dateAndTimeString" : "2021-03-01T17:31:47.654593+01:00"
								}
							},
							"editEmail" : {
								"__type" : "email",
								"emailString" : "chisvasileandrei@gmail.com"
							},
							"editTime" : {
								"__type" : "time",
								"time" : {
									"__type" : "dateAndTime",
									"dateAndTimeString" : "2021-03-01T17:31:47.654593+01:00"
								}
							},
							"uid" : {
								"__type" : "uid",
								"uidString" : "HH7cNm6mAAAAAAAAAAAAAA=="
							},
							"paragraphStyle" : {
								"__type" : "textStyle"
							},
							"string" : "View dependencies using a tree."
						}
					]
				},
				"createEmail" : {
					"__type" : "email",
					"emailString" : "chisvasileandrei@gmail.com"
				},
				"createTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2021-03-01T17:29:51.263546+01:00"
					}
				},
				"editEmail" : {
					"__type" : "email",
					"emailString" : "<unknown>"
				},
				"editTime" : {
					"__type" : "time",
					"time" : {
						"__type" : "dateAndTime",
						"dateAndTimeString" : "2021-06-12T23:36:56.267134+02:00"
					}
				},
				"uid" : {
					"__type" : "uid",
					"uidString" : "ore3bCAjAAAAAAAAAAAAAA=="
				},
				"paragraphStyle" : {
					"__type" : "textStyle"
				},
				"string" : "Ok, the JSON is here. We can just focus on extracting and visualizing the dependencies."
			}
		]
	},
	"createEmail" : {
		"__type" : "email",
		"emailString" : "chisvasileandrei@gmail.com"
	},
	"createTime" : {
		"__type" : "time",
		"time" : {
			"__type" : "dateAndTime",
			"dateAndTimeString" : "2021-03-01T17:22:00.299713+01:00"
		}
	},
	"editEmail" : {
		"__type" : "email",
		"emailString" : "<unknown>"
	},
	"editTime" : {
		"__type" : "time",
		"time" : {
			"__type" : "dateAndTime",
			"dateAndTimeString" : "2021-06-07T08:21:52.611376+02:00"
		}
	},
	"pageType" : {
		"__type" : "namedPage",
		"title" : "Visualizing yarn.lock files using JavaScript and Pharo"
	},
	"uid" : {
		"__type" : "uuid",
		"uuid" : "b8ca1dc1-dd78-0d00-96ea-c4ed016d12a8"
	}
}